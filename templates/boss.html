<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Панель админа</title>
    <link rel="stylesheet" href="/static/css/main.css">
    <script src="https://cdn.amcharts.com/lib/5/index.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/xy.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/themes/Animated.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/locales/de_DE.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/geodata/germanyLow.js"></script>
    <script src="https://cdn.amcharts.com/lib/5/fonts/notosans-sc.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>
<body>
    <nav class="navbar" style="background-color: #E2E9F4; !important;">
      <div class="container-fluid">
        <a class="navbar-brand" href="/trolleybuspark/"><img src="/static/trolleybus.jpg" width="130" height="55"></a>
        <form id="createReportForm" class="d-flex" role="search">
            <button class="btn day_btn" type="submit" id="repLeftButton">ᐊ</button>
            <input class="form-control rounded-0" type="search" id="repDateInput" name="date" placeholder="ММ.ГГГГ" autocomplete="off" style="width: 120px; height: 40px; font-size:20px">
            <button class="btn day_btn me-3" type="submit" id="repRightButton">ᐅ</button>
            <button class="btn btn-primary" type="submit">Дать отчёт</button>
        </form>
        <div class="d-flex justify-content-between gap-3">
          <div class="d-flex flex-column justify-content-between" id="login">
            <a>{{ login }}</a>
            <a href="/logout">Выход</a>
          </div>
        </div>
      </div>
    </nav>
    <div class="table-header" style="padding-left: 6rem; margin-top: 2rem;" id="tableHeader">
        <h2>Отчёт по водителям за декабрь 2024</h2>
    </div>
    <div id="driverschartdiv" style="height: 250px; margin:auto; margin-top: 1.5rem; width: 90%;"></div>
    <script src="/static/js/personal_manager.js" type="module"></script>
    <script>
        var root = am5.Root.new("driverschartdiv");

        root.setThemes([
          am5themes_Animated.new(root)
        ]);

        var chart = root.container.children.push(
          am5xy.XYChart.new(root, {
            panY: false,
            wheelY: "zoomX",
            layout: root.verticalLayout,
            maxTooltipDistance: 0
          })
        );

        var data = [{
          date: new Date(2021, 0, 1).getTime(),
          value: 100
        }, {
          date: new Date(2021, 0, 2).getTime(),
          value: 320
        }, {
          date: new Date(2021, 0, 3).getTime(),
          value: 216
        }, {
          date: new Date(2021, 0, 4).getTime(),
          value: 150
        }, {
          date: new Date(2021, 0, 5).getTime(),
          value: 156
        }];

        var yAxis = chart.yAxes.push(
          am5xy.ValueAxis.new(root, {
            extraTooltipPrecision: 1,
            renderer: am5xy.AxisRendererY.new(root, {})
          })
        );

        let xAxis = chart.xAxes.push(
          am5xy.DateAxis.new(root, {
            baseInterval: { timeUnit: "day", count: 1 },
            startLocation: 0.5,
            endLocation: 0.5,
            renderer: am5xy.AxisRendererX.new(root, {
              minGridDistance: 30
            })
          })
        );

        xAxis.get("dateFormats")["day"] = "MM/dd";
        xAxis.get("periodChangeDateFormats")["day"] = "MM/dd";

        function createSeries(name, field) {
          var series = chart.series.push(
            am5xy.LineSeries.new(root, {
              name: name,
              xAxis: xAxis,
              yAxis: yAxis,
              valueYField: field,
              valueXField: "date",
              tooltip: am5.Tooltip.new(root, {}),
              maskBullets: false
            })
          );

          series.bullets.push(function() {
            return am5.Bullet.new(root, {
              sprite: am5.Circle.new(root, {
                radius: 5,
                fill: series.get("fill")
              })
            });
          });

          series.strokes.template.set("strokeWidth", 2);

          series.get("tooltip").label.set("text", "[bold]{name}[/]\n{valueX.formatDate()}: {valueY}")
          series.data.setAll(data);
        }

        createSeries("Отработано", "value");

        chart.set("cursor", am5xy.XYCursor.new(root, {
          behavior: "zoomXY",
          xAxis: xAxis
        }));

        xAxis.set("tooltip", am5.Tooltip.new(root, {
          themeTags: ["axis"]
        }));

        yAxis.set("tooltip", am5.Tooltip.new(root, {
          themeTags: ["axis"]
        }));
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>